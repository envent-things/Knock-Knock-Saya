<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EvenTion | Services</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <style>
    :root {
      --bg1: #16042c; --bg2: #2d0f52; --bg3: #0f2448;
      --card: rgba(38,17,71,.9); --pink:#ff1e8a; --gold:#ffd84d; --mint:#5effd6;
      --border:#55327f; --text:#f4ecff;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
    body {
      color: var(--text);
      background: linear-gradient(130deg, var(--bg1), var(--bg2), var(--bg3), #5a0e59);
      background-size: 260% 260%; animation: shift 16s ease infinite; min-height: 100vh;
    }
    @keyframes shift {0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}

    header {
      position: sticky; top: 0; z-index: 10; display: flex; justify-content: space-between; align-items: center;
      padding: 16px 8%; background: rgba(12,4,26,0.75); backdrop-filter: blur(10px); border-bottom: 1px solid #4a2e74;
    }
    .logo { font-size: 2.1rem; font-weight: 900; letter-spacing: 2px; text-transform: uppercase; text-shadow: 0 0 10px #ff1e8a, 0 0 20px #ff1e8a, 0 0 35px #6e4bff; }
    nav a { color:white; text-decoration:none; font-weight:700; padding:8px 12px; border-radius:999px; margin-left:8px; }
    nav a.active, nav a:hover { background: var(--pink); }

    .cart-box { background: var(--pink); padding: 9px 14px; border-radius: 999px; display: inline-flex; gap: 8px; margin-left: 8px; cursor: pointer; font-weight: 800; }
    .hero { text-align: center; padding: 56px 18px 24px; }
    .hero h1 { color: var(--gold); font-size: 2.6rem; }

    .grid { padding: 12px 8% 58px; display:grid; gap:18px; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; position: relative; }
    .card img { width:100%; aspect-ratio:1/1; object-fit:cover; }
    .card-body { padding: 12px; }
    .tag { color:#ceb5ff; font-size:.82rem; margin-bottom:5px; }
    .name { min-height: 44px; font-weight: 700; }
    .price { color: var(--mint); font-size: 1.2rem; font-weight: 900; margin: 8px 0 10px; }
    .badge { position:absolute; top:10px; left:10px; font-size:.7rem; font-weight:900; background:var(--pink); padding:5px 8px; border-radius:5px; }
    .btn { width:100%; border:none; border-radius:8px; padding:11px; font-weight:800; cursor:pointer; color:white; background:var(--pink); }

    .modal { display:none; position:fixed; inset:0; z-index:20; background:rgba(0,0,0,.8); backdrop-filter: blur(6px); overflow-y:auto; padding:20px 10px; }
    .modal-content { max-width:560px; margin:12px auto; border:2px solid var(--pink); border-radius:16px; background:#1f0d3b; padding:20px; position:relative; }
    .close-btn { position:absolute; right:14px; top:8px; font-size:30px; cursor:pointer; }
    form label { display:block; margin-top:10px; font-size:.82rem; color:#d2c4f8; }
    form input, form textarea { width:100%; margin-top:5px; border-radius:8px; border:1px solid #5f4292; background:#2a144a; color:white; padding:10px; }
    .materials-wrap { margin-top:8px; background:#2b1550; padding:10px; border-radius:10px; }
    .material-row { display:grid; grid-template-columns:auto 1fr 72px; gap:9px; align-items:center; margin-bottom:8px; }
    .cart-item { border:1px solid #5b3a8a; border-radius:10px; background:#2a154b; padding:10px; margin-bottom:10px; }
    .cart-item ul { margin-left:18px; margin-top:6px; color:#e0d1ff; }
    .total { color:var(--mint); font-weight:900; font-size:1.2rem; margin-top:8px; }

    footer { padding:24px 8%; border-top:1px solid #4a2e74; background:rgba(12,4,26,.7); display:flex; justify-content:space-between; flex-wrap:wrap; gap:14px; }
    .foot-brand { font-weight:900; color:var(--gold); }
  </style>
</head>
<body>
  <header>
    <div class="logo">EvenTion</div>
    <nav>
      <a href="index.html">Home</a>
      <a class="active" href="services.html">Services</a>
      <a href="about.html">About</a>
      <span class="cart-box" id="openCartBtn"><i class="fas fa-shopping-cart"></i><span id="cart-counter">0</span></span>
    </nav>
  </header>

  <section class="hero">
    <h1>Services & Checkout</h1>
    <p>Choose from our 4 core event packages and add custom materials before checkout.</p>
  </section>

  <section class="grid" id="main-grid"></section>

  <div id="bookingModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" data-close="bookingModal">&times;</span>
      <h2 id="m-title" style="color:var(--gold)">Package Name</h2>
      <p id="m-price" style="color:var(--mint);font-size:1.4rem;font-weight:900"></p>
      <p id="m-category" style="color:#d6c6ff"></p>
      <form id="mainOrderForm">
        <label>Recipient Full Name</label><input id="r-name" type="text" required />
        <label>Event Date</label><input id="r-date" type="date" required />
        <label>Delivery Address</label><textarea id="r-address" rows="3" required></textarea>
        <label>Additional Materials (Optional)</label>
        <div id="materialsContainer" class="materials-wrap"></div>
        <button type="submit" class="btn" style="margin-top:14px;background:#21a745">CONFIRM + ADD TO CART</button>
      </form>
    </div>
  </div>

  <div id="cartModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" data-close="cartModal">&times;</span>
      <h2 style="color:var(--gold);margin-bottom:8px">Your Cart</h2>
      <div id="cartItemsContainer"></div>
      <div class="total" id="cartTotal">Total: ₱0.00</div>
    </div>
  </div>

  <footer>
    <div><div class="foot-brand">EvenTion</div><div>Packages for Birthday, Valentine's, Wedding, and Graduation.</div></div>
    <div>© 2026 EvenTion. All rights reserved.</div>
  </footer>

  <script>
    const packageData = [
      { id: 1, category: 'Birthday', name: 'Birthday Dream Setup', price: 5000, image: 'bday_elite.jpg', badge: 'POPULAR' },
      { id: 2, category: "Valentine's", name: 'Valentine Romance Setup', price: 4200, image: 'val_premium1.jpg', badge: 'SEASONAL' },
      { id: 3, category: 'Wedding', name: 'Wedding Elegant Setup', price: 7200, image: 'father_sweetcakes.jpg', badge: 'CUSTOM' },
      { id: 4, category: 'Graduation', name: 'Graduation Milestone Setup', price: 5800, image: 'bday_richkid1.jpg', badge: 'NEW' }
    ];

    const materialsByCategory = {
      'Birthday': [{ name: 'Balloon Set', price: 350 }, { name: 'Cake Topper', price: 150 }, { name: 'Party Banner', price: 250 }],
      "Valentine's": [{ name: 'Rose Bouquet', price: 800 }, { name: 'Chocolate Box', price: 450 }, { name: 'LED Candles', price: 260 }],
      'Wedding': [{ name: 'Flower Arch', price: 2200 }, { name: 'Table Centerpiece', price: 900 }, { name: 'Photo Backdrop', price: 1500 }],
      'Graduation': [{ name: 'Congrats Banner', price: 300 }, { name: 'Photo Booth Props', price: 400 }, { name: 'Cap & Tassel Souvenir', price: 180 }]
    };

    let selectedPackage = null;
    const cart = [];
    const gridEl = document.getElementById('main-grid');
    const bookingModal = document.getElementById('bookingModal');
    const cartModal = document.getElementById('cartModal');
    const materialsContainer = document.getElementById('materialsContainer');
    const phpMoney = (v) => `₱${v.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;

    function renderPackages() {
      gridEl.innerHTML = packageData.map(p => `
        <div class="card">
          ${p.badge ? `<div class="badge">${p.badge}</div>` : ''}
          <img src="${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/400?text=Image+Unavailable'">
          <div class="card-body">
            <div class="tag">${p.category}</div>
            <div class="name">${p.name}</div>
            <div class="price">${phpMoney(p.price)}</div>
            <button class="btn" onclick="openBooking(${p.id})">Select Package</button>
          </div>
        </div>`).join('');
    }

    function renderMaterials(category) {
      const mats = materialsByCategory[category] || [];
      materialsContainer.innerHTML = mats.map((m, i) => `
        <div class="material-row">
          <input type="checkbox" id="mat-${i}" data-name="${m.name}" data-price="${m.price}">
          <label for="mat-${i}">${m.name} (${phpMoney(m.price)} each)</label>
          <input type="number" id="qty-${i}" min="1" value="1">
        </div>`).join('') || '<p>No materials available.</p>';
    }

    function openBooking(id) {
      const pkg = packageData.find(p => p.id === id);
      if (!pkg) return;
      selectedPackage = pkg;
      document.getElementById('m-title').innerText = pkg.name;
      document.getElementById('m-price').innerText = phpMoney(pkg.price);
      document.getElementById('m-category').innerText = `Event: ${pkg.category}`;
      renderMaterials(pkg.category);
      bookingModal.style.display = 'block';
    }

    function closeModal(id) { document.getElementById(id).style.display = 'none'; }

    function renderCart() {
      const wrap = document.getElementById('cartItemsContainer');
      document.getElementById('cart-counter').innerText = cart.length;
      if (!cart.length) { wrap.innerHTML = '<p>Your cart is empty.</p>'; document.getElementById('cartTotal').innerText = 'Total: ₱0.00'; return; }

      let total = 0;
      wrap.innerHTML = cart.map(item => {
        const matsTotal = item.materials.reduce((s, m) => s + m.price * m.qty, 0);
        const line = item.packagePrice + matsTotal;
        total += line;
        return `<div class="cart-item"><strong>${item.packageName}</strong><p>${item.category} • ${item.recipient} • ${item.date}</p><p>Package: ${phpMoney(item.packagePrice)}</p>${item.materials.length ? `<ul>${item.materials.map(m => `<li>${m.name} x${m.qty} (${phpMoney(m.price*m.qty)})</li>`).join('')}</ul>` : '<p>No add-ons selected.</p>'}<p style="margin-top:6px;color:var(--mint)">Line Total: ${phpMoney(line)}</p></div>`;
      }).join('');
      document.getElementById('cartTotal').innerText = `Total: ${phpMoney(total)}`;
    }

    document.getElementById('mainOrderForm').addEventListener('submit', function(e) {
      e.preventDefault();
      if (!selectedPackage) return;
      const selectedMaterials = [...materialsContainer.querySelectorAll('input[type="checkbox"]:checked')].map(check => {
        const idx = check.id.split('-')[1];
        const qty = Math.max(1, parseInt(document.getElementById(`qty-${idx}`).value, 10) || 1);
        return { name: check.dataset.name, price: Number(check.dataset.price), qty };
      });
      cart.push({
        category: selectedPackage.category,
        packageName: selectedPackage.name,
        packagePrice: selectedPackage.price,
        recipient: document.getElementById('r-name').value.trim(),
        date: document.getElementById('r-date').value,
        address: document.getElementById('r-address').value.trim(),
        materials: selectedMaterials
      });
      renderCart(); this.reset(); closeModal('bookingModal'); alert('Added to cart!');
    });

    document.querySelectorAll('[data-close]').forEach(btn => btn.addEventListener('click', () => closeModal(btn.dataset.close)));
    document.getElementById('openCartBtn').addEventListener('click', () => { renderCart(); cartModal.style.display = 'block'; });
    window.addEventListener('click', (e) => { if (e.target === bookingModal) closeModal('bookingModal'); if (e.target === cartModal) closeModal('cartModal'); });

    renderPackages();
    renderCart();
  </script>
</body>
</html>
